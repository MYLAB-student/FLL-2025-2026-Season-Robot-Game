# LEGO SPIKE Prime ãƒ­ãƒœãƒƒãƒˆåˆ¶å¾¡ãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼ˆGemini-2.5-proï¼‰

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€LEGO SPIKE Primeãƒ­ãƒœãƒƒãƒˆã‚’Pybricksã‚’ä½¿ç”¨ã—ã¦åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒ ç¾¤ã§ã™ã€‚

## ğŸ“‘ ç›®æ¬¡

- [ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ](#-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ)
- [âš¡ é–‹ç™ºæ™‚ã®æµã‚Œ](#-é–‹ç™ºæ™‚ã®æµã‚Œ)
  - [æ–°ã—ã„ãƒ©ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆæ‰‹é †](#æ–°ã—ã„ãƒ©ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆæ‰‹é †)
  - [ãƒ­ãƒ¼ãƒãƒ¼ãƒ»ã‚¢ãƒ¼ãƒ æ“ä½œã®è©³ç´°ä¾‹](#ãƒ­ãƒ¼ãƒãƒ¼ã‚¢ãƒ¼ãƒ æ“ä½œã®è©³ç´°ä¾‹)
    - [ğŸš— å˜ç´”ãªæ“ä½œ](#-å˜ç´”ãªæ“ä½œ)
    - [ğŸ”„ è¤‡é›‘ãªæ“ä½œ](#-è¤‡é›‘ãªæ“ä½œ)
    - [ğŸ¯ å®Ÿè·µçš„ãªãƒŸãƒƒã‚·ãƒ§ãƒ³ä¾‹](#-å®Ÿè·µçš„ãªãƒŸãƒƒã‚·ãƒ§ãƒ³ä¾‹)
    - [ğŸ’¡ ãƒ¢ãƒ¼ã‚¿ãƒ¼åˆ¶å¾¡ã®ã‚³ãƒ„](#-ãƒ¢ãƒ¼ã‚¿ãƒ¼åˆ¶å¾¡ã®ã‚³ãƒ„)
  - [selector.pyã§ã®ç™»éŒ²æ‰‹é †](#selectorpyã§ã®ç™»éŒ²æ‰‹é †)
- [âš¡ ç«¶æŠ€æ™‚ã®æ“ä½œæ–¹æ³•](#-ç«¶æŠ€æ™‚ã®æ“ä½œæ–¹æ³•)
- [ğŸš€ æ©Ÿèƒ½](#-æ©Ÿèƒ½)
- [ğŸ”§ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#-ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
  - [é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆCursorï¼‰](#é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—cursor)
- [ğŸ“– ä½¿ç”¨æ–¹æ³•](#-ä½¿ç”¨æ–¹æ³•)
  - [Cursorã§ã®å®Ÿè¡Œæ–¹æ³•](#1-cursorã§ã®å®Ÿè¡Œæ–¹æ³•)
  - [ãƒ—ãƒ­ã‚°ãƒ©ãƒ é¸æŠãƒ¢ãƒ¼ãƒ‰](#3-ãƒ—ãƒ­ã‚°ãƒ©ãƒ é¸æŠãƒ¢ãƒ¼ãƒ‰)
  - [ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ](#4-ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ)
- [âš™ï¸ è¨­å®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿](#ï¸-è¨­å®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿)
- [ğŸ” ã‚»ãƒ³ã‚µãƒ¼æƒ…å ±](#-ã‚»ãƒ³ã‚µãƒ¼æƒ…å ±)
  - [ãƒ­ã‚°æ©Ÿèƒ½ã®ã‚ªãƒ³ãƒ»ã‚ªãƒ•åˆ‡ã‚Šæ›¿ãˆ](#ãƒ­ã‚°æ©Ÿèƒ½ã®ã‚ªãƒ³ã‚ªãƒ•åˆ‡ã‚Šæ›¿ãˆ)
- [ğŸ› ï¸ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º](#ï¸-ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º)
- [âš ï¸ æ³¨æ„äº‹é …](#ï¸-æ³¨æ„äº‹é …)
- [ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#-ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
åç§°æœªè¨­å®šãƒ•ã‚©ãƒ«ã‚¿ã‚™/
â”œâ”€â”€ README.md              # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ selecter.py           # ãƒ—ãƒ­ã‚°ãƒ©ãƒ é¸æŠãƒ»å®Ÿè¡Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
    â”œâ”€â”€ setup.py              # ãƒ­ãƒœãƒƒãƒˆåˆæœŸåŒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
    â”œâ”€â”€ run1.py                # ãƒ©ãƒ³ã”ã¨ã«ä½œã‚‹å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«
    â”œâ”€â”€ run2.py                
    â”œâ”€â”€ run3.py                
    â””â”€â”€ straight_test.py      # ç›´é€²ãƒ»å›è»¢ãƒ†ã‚¹ãƒˆç”¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ 


```
## âš¡ é–‹ç™ºæ™‚ã®æµã‚Œ

### æ–°ã—ã„ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆæ–¹æ³•ï¼ˆrun_template.pyä½¿ç”¨ï¼‰

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€`run_template.py`ã‚’ä½¿ã£ã¦æ–°ã—ã„ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åŠ¹ç‡çš„ã«ä½œæˆã§ãã¾ã™ã€‚

#### 1. run_template.pyã®æ¦‚è¦

`run_template.py`ã¯æ–°ã—ã„ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆã®ãŸã‚ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚

ãƒ©ãƒ³ã‚’å¢—ã‚„ã™ã¨ãã«ã¯ã€`run_template.py`ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã€Œ# ã“ã“ã«ãƒ­ãƒœãƒƒãƒˆã®å‹•ä½œã‚’è¨˜è¿°ã—ã¦ãã ã•ã„ã€ã®ãƒ‘ãƒ¼ãƒˆã‚’ç·¨é›†ã—ã¾ã™ã€‚


#### ãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã™ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```python
# ä»¥ä¸‹ã¯åŸºæœ¬çš„ãªãƒ­ãƒœãƒƒãƒˆå‹•ä½œã®ä¾‹ã§ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’è§£é™¤ã—ã¦ä½¿ç”¨ã—ã¦ãã ã•ã„


# ã€awaitã«ã¤ã„ã¦ã€‘
# await = å‹•ä½œãŒå®Œäº†ã™ã‚‹ã¾ã§å¾…æ©Ÿï¼ˆé †æ¬¡å®Ÿè¡Œï¼‰ã€€
# ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€ç›´é€²ãŒçµ‚ã‚ã‚‹ã¾ã§ã‚¢ãƒ¼ãƒ ã¯ä¸ŠãŒã‚‰ãªã„
await robot.straight(300)ã€€
await left_lift.run_angle(200, 360)
 
# awaitãªã— = å‹•ä½œã‚’é–‹å§‹ã—ã¦ã™ãæ¬¡ã®å‡¦ç†ã¸ï¼ˆä¸¦è¡Œå®Ÿè¡Œï¼‰
# ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€ç›´é€²ã¨ã‚¢ãƒ¼ãƒ ã®å‹•ä½œãŒåŒæ™‚ã«è¡Œã‚ã‚Œã‚‹
robot.straight(300)
await left_lift.run_angle(200, 360)


# å‹•ä½œé€Ÿåº¦ã®è¨­å®š: robot.settingsã§ç›´é€²ãƒ»å›è»¢é€Ÿåº¦ã‚’èª¿æ•´
# åˆæœŸå€¤    straight_speed=200ã€€â†’ã€€40% of 500 mm/sã€ turn_rate=150ã€€â†’ã€€30% of 500 deg/s    
 
# ç›´é€²é€Ÿåº¦ã‚’200mm/sã«è¨­å®šã—ã¦å‰é€²
robot.settings(straight_speed=200)  # ç›´é€²200mm/s
await robot.straight(300)ã€€# 300mmå‰é€²
 
# å›è»¢é€Ÿåº¦ã‚’100deg/sã«è¨­å®šã—ã¦å›è»¢
robot.settings(turn_rate=100)  # å›è»¢100deg/s    
await robot.turn(90) # 90åº¦å³å›è»¢
 
# å‰é€²é€Ÿåº¦ã‚’400mm/sã€å›è»¢é€Ÿåº¦ã‚’200deg/sã«è¨­å®šã—ã¦å®Ÿè¡Œ
robot.settings(straight_speed=400, turn_rate=200)  # å‰é€²é€Ÿåº¦ã¨å›è»¢é€Ÿåº¦ã‚’è¨­å®š
await robot.straight(300)ã€€# 300mmå‰é€²
await robot.turn(90) # 90åº¦å³å›è»¢


# ç›´é€²ç§»å‹•: 300mmå‰é€²ï¼ˆéåŒæœŸå®Ÿè¡Œï¼‰
await robot.straight(300)ã€€# 300mmå‰é€²
await robot.straight(-300)ã€€# 300mmå¾Œé€²


# å›è»¢å‹•ä½œ: ãã®å ´ã§90åº¦å³å›è»¢ï¼ˆéåŒæœŸå®Ÿè¡Œï¼‰
await robot.turn(90) # 90åº¦å³å›è»¢


# ã‚«ãƒ¼ãƒ–ç§»å‹•: åŠå¾„150mmã§90åº¦ã‚«ãƒ¼ãƒ–ï¼ˆéåŒæœŸå®Ÿè¡Œï¼‰
await robot.curve(150, 90)


# ãƒªãƒ•ãƒˆæ“ä½œ: å·¦ãƒªãƒ•ãƒˆã‚’é€Ÿåº¦200ã§360åº¦å›è»¢ï¼ˆéåŒæœŸå®Ÿè¡Œï¼‰
await left_lift.run_angle(200, 360)


# ãƒªãƒ•ãƒˆæ“ä½œ: å·¦ãƒªãƒ•ãƒˆã‚’é€Ÿåº¦200ã§360åº¦å›è»¢ï¼ˆåŒæœŸå®Ÿè¡Œãƒ»awaitãªã—ï¼‰
left_lift.run_angle(200, 360)

# å‰é€²ã‚’å§‹ã‚ã¦1ç§’å¾Œã«ã‚¢ãƒ¼ãƒ ã‚’ä¸Šã’ã‚‹ï¼ˆä¸¦è¡Œå®Ÿè¡Œï¼‰
robot.settings(straight_speed=200, turn_rate=150) # ç›´é€²é€Ÿåº¦ã¨å›è»¢é€Ÿåº¦ã‚’è¨­å®š
robot.straight(500, wait=False)  # 500mmå‰é€²é–‹å§‹ï¼ˆã™ãã«æ¬¡ã®å‡¦ç†ã¸ï¼‰
await wait(1000)  # 1ç§’å¾…ã¤
await left_lift.run_angle(300, 180)  # å·¦ã‚¢ãƒ¼ãƒ ã‚’ä¸Šã’ã‚‹
```




**ç‰¹å¾´:**
- ã‚·ãƒ³ãƒ—ãƒ«ãªåŸºæœ¬æ§‹é€ ã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã‚„ã™ã„
- ã‚»ãƒ³ã‚µãƒ¼ãƒ­ã‚°æ©Ÿèƒ½ä»˜ã
- éåŒæœŸå‡¦ç†å¯¾å¿œ
- ãã®ã¾ã¾å®Ÿè¡Œå¯èƒ½

**åŸºæœ¬æ§‹é€ :**
```python
# run_template.py
from pybricks.hubs import PrimeHub
from pybricks.parameters import Port, Axis, Direction ,Color
from pybricks.pupdevices import Motor
from pybricks.robotics import DriveBase
from pybricks.tools import wait, multitask, run_task
from setup import initialize_robot

async def run(hub, robot, left_wheel, right_wheel, left_lift, right_lift):
    # ã“ã“ã«ãƒ­ãƒœãƒƒãƒˆã®å‹•ä½œã‚’è¨˜è¿°ã—ã¦ãã ã•ã„
    pass  # ä½•ã‚‚å®Ÿè¡Œã—ãªã„å ´åˆã®æ§‹æ–‡ã‚¨ãƒ©ãƒ¼å›é¿

# ã‚»ãƒ³ã‚µãƒ¼ãƒ­ã‚°æ©Ÿèƒ½ã¨ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œæ©Ÿèƒ½ã‚’å«ã‚€
```

#### 2. æ–°ã—ã„ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆæ‰‹é †

1. **ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ”ãƒ¼**
   ```bash
   # run_template.pyã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æ–°ã—ã„ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
   cp run_template.py mission01ï¼ˆClaude-3.5-Sonnetï¼‰.py
   ```

2. **runé–¢æ•°ã®ç·¨é›†**
   ```python
   # mission01ï¼ˆClaude-3.5-Sonnetï¼‰.py
   async def run(hub ,robot, left_wheel, right_wheel,left_lift,right_lift):
       """ãƒŸãƒƒã‚·ãƒ§ãƒ³1: ãƒ–ãƒ­ãƒƒã‚¯é‹æ¬"""
       # ã“ã“ã«ãƒŸãƒƒã‚·ãƒ§ãƒ³å›ºæœ‰ã®å‹•ä½œã‚’è¨˜è¿°
       
       # ä¾‹: ãƒ–ãƒ­ãƒƒã‚¯å–å¾—ãƒã‚¤ãƒ³ãƒˆã¾ã§ç§»å‹•
       await robot.straight(400)  # 400mmå‰é€²
       await robot.turn(45)       # 45åº¦å³å›è»¢
       
       # ã‚¢ãƒ¼ãƒ ã§ãƒ–ãƒ­ãƒƒã‚¯ã‚’æ´ã‚€
       await left_lift.run_angle(300, 180)  # å·¦ã‚¢ãƒ¼ãƒ æ“ä½œ
       await right_lift.run_angle(300, 180) # å³ã‚¢ãƒ¼ãƒ æ“ä½œ
       await wait(500)                      # 0.5ç§’å¾…æ©Ÿ
       
       # ãƒ–ãƒ­ãƒƒã‚¯ã‚’é‹æ¬
       await robot.straight(-100)   # 100mmå¾Œé€€
       await robot.turn(-90)        # 90åº¦å·¦å›è»¢
       await robot.straight(600)    # 600mmå‰é€²
       
       # ãƒ–ãƒ­ãƒƒã‚¯ã‚’é…ç½®
       await left_lift.run_angle(300, -180)  # ã‚¢ãƒ¼ãƒ ã‚’æˆ»ã™
       await right_lift.run_angle(300, -180)
       await wait(300)
       
       # åˆæœŸä½ç½®ã«æˆ»ã‚‹
       await robot.straight(-300)
       await robot.turn(45)
   ```

3. **å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**
   ```bash
   # æ–°ã—ã„ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥å®Ÿè¡Œã—ã¦ãƒ†ã‚¹ãƒˆ
   python mission01ï¼ˆClaude-3.5-Sonnetï¼‰.py
   ```

#### 3. selecter_dev.pyã¸ã®ç™»éŒ²

1. **ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡ã®è¿½åŠ **
   ```python
   # selecter_dev.py ã®å…ˆé ­ä»˜è¿‘ã«è¿½åŠ 
   import run
   import run1
   import run_sample
   import mission01_claude_3_5_sonnet as mission01  # æ–°ã—ãè¿½åŠ ï¼ˆæ‹¬å¼§ã¯ä½¿ãˆãªã„ãŸã‚ï¼‰
   ```

2. **programsãƒªã‚¹ãƒˆã¸ã®è¿½åŠ **
   ```python
   # selecter_dev.py ã®programsãƒªã‚¹ãƒˆã«æ–°ã—ã„ã‚¨ãƒ³ãƒˆãƒªã‚’è¿½åŠ 
   programs = [
       {"name": "straight_with_power", "module": run, "description": "straight_with_poweré–¢æ•°", "function": "straight_with_power", "params": [robot,100, 50]},
       {"name": "straight_with_power", "module": run, "description": "straight_with_poweré–¢æ•°", "function": "straight_with_power", "params": [robot,100, 10]},
       {"name": "å›è»¢", "module": run, "description": "å›è»¢", "function": "turn_with_power", "params": [robot,hub,100, 10]},
       {"name": "run1", "module": run1, "description": "run1é–¢æ•°", "function": "run1", "params": [hub ,robot, left_wheel, right_wheel,left_lift,right_lift]},
       {"name": "run1", "module": run_sample, "description": "run1é–¢æ•°", "function": "run1", "params": [hub ,robot, left_wheel, right_wheel,left_lift,right_lift]},
       {"name": "ãƒŸãƒƒã‚·ãƒ§ãƒ³1", "module": mission01, "description": "ãƒ–ãƒ­ãƒƒã‚¯é‹æ¬ãƒŸãƒƒã‚·ãƒ§ãƒ³", "function": "run", "params": [hub ,robot, left_wheel, right_wheel,left_lift,right_lift]},  # æ–°ã—ãè¿½åŠ 
       # ä»–ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ã“ã“ã«è¿½åŠ 
   ]
   ```

#### 4. selecter_dev.pyã§ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

1. **é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§ã®å®Ÿè¡Œ**
   ```bash
   # selecter_dev.py ã‚’å®Ÿè¡Œï¼ˆã‚»ãƒ³ã‚µãƒ¼ãƒ­ã‚°æœ‰åŠ¹ï¼‰
   python selecter_dev.py
   ```

2. **æ“ä½œæ–¹æ³•**
   - **LEFTãƒœã‚¿ãƒ³**: å‰ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«åˆ‡ã‚Šæ›¿ãˆ
   - **RIGHTãƒœã‚¿ãƒ³**: æ¬¡ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«åˆ‡ã‚Šæ›¿ãˆ  
   - **ãƒ•ã‚©ãƒ¼ã‚¹ã‚»ãƒ³ã‚µãƒ¼**: é¸æŠã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œ

3. **ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½**
   ```python
   # selecter_dev.py ã®11è¡Œç›®ã§ãƒ­ã‚°ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’åˆ‡ã‚Šæ›¿ãˆ
   dev = True   # ã‚»ãƒ³ã‚µãƒ¼ãƒ­ã‚°è¡¨ç¤º
   dev = False  # ã‚»ãƒ³ã‚µãƒ¼ãƒ­ã‚°éè¡¨ç¤ºï¼ˆé«˜é€Ÿå®Ÿè¡Œï¼‰
   ```

#### 5. ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡

**æ¨å¥¨ãƒ•ã‚¡ã‚¤ãƒ«å:**
- `mission01ï¼ˆClaude-3.5-Sonnetï¼‰.py` â† ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ«ãƒ¼ãƒ«å¯¾å¿œ
- `task_deliveryï¼ˆClaude-3.5-Sonnetï¼‰.py`
- `bridge_missionï¼ˆClaude-3.5-Sonnetï¼‰.py`

**ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®æ³¨æ„:**
```python
# æ‹¬å¼§ã‚„ãƒã‚¤ãƒ•ãƒ³ã‚’å«ã‚€ãƒ•ã‚¡ã‚¤ãƒ«åã¯é€šå¸¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒã§ããªã„
# import mission01ï¼ˆClaude-3.5-Sonnetï¼‰  # ã‚¨ãƒ©ãƒ¼

# è§£æ±ºæ–¹æ³•1: ãƒ•ã‚¡ã‚¤ãƒ«åã‚’å¤‰æ›´
# mission01_claude_3_5_sonnet.py ã«ãƒªãƒãƒ¼ãƒ 
import mission01_claude_3_5_sonnet as mission01

# è§£æ±ºæ–¹æ³•2: importlibã‚’ä½¿ç”¨ï¼ˆæ‹¬å¼§ä»˜ããƒ•ã‚¡ã‚¤ãƒ«åã®å ´åˆï¼‰
import importlib.util, sys
spec = importlib.util.spec_from_file_location("mission01", "mission01ï¼ˆClaude-3.5-Sonnetï¼‰.py")
mission01 = importlib.util.module_from_spec(spec)
sys.modules["mission01"] = mission01
spec.loader.exec_module(mission01)
```

#### 6. é‹ç”¨ãƒ•ãƒ­ãƒ¼

```
1. run_template.py ã‚’ã‚³ãƒ”ãƒ¼
     â†“
2. ãƒŸãƒƒã‚·ãƒ§ãƒ³å†…å®¹ã«åˆã‚ã›ã¦ runé–¢æ•° ã‚’ç·¨é›†
     â†“
3. å˜ä½“ã§å‹•ä½œãƒ†ã‚¹ãƒˆï¼ˆpython missionâ—.pyï¼‰
     â†“
4. selecter_dev.py ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ç™»éŒ²
     â†“
5. ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ã®å‹•ä½œç¢ºèªï¼ˆdev=Trueï¼‰
     â†“
6. å•é¡Œãªã‘ã‚Œã° selecter.py ã«ã‚‚ç™»éŒ²
     â†“
7. ç«¶æŠ€ç”¨ã¨ã—ã¦ selecter.py ã‚’ãƒãƒ–ã«æ›¸ãè¾¼ã¿
```

#### 7. run_template.pyã¨selecter_dev.pyã®é€£æºãƒ¡ãƒªãƒƒãƒˆ

- **åŠ¹ç‡çš„ãªé–‹ç™º**: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§åŸºæœ¬æ§‹é€ ã‚’ç´ æ—©ãä½œæˆ
- **çµ±ä¸€ã•ã‚ŒãŸå½¢å¼**: å…¨ã¦ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ãŒåŒã˜æ§‹é€ 
- **ãƒ‡ãƒãƒƒã‚°æ”¯æ´**: selecter_dev.pyã®ã‚»ãƒ³ã‚µãƒ¼ãƒ­ã‚°ã§å‹•ä½œç¢ºèª
- **æ®µéšçš„ãƒ†ã‚¹ãƒˆ**: å˜ä½“ãƒ†ã‚¹ãƒˆ â†’ ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼çµ±åˆãƒ†ã‚¹ãƒˆ
- **ç°¡å˜ãªåˆ‡ã‚Šæ›¿ãˆ**: ãƒœã‚¿ãƒ³æ“ä½œã§è¤‡æ•°ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’ç´ æ—©ãå®Ÿè¡Œ

### æ–°ã—ã„ãƒ©ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆæ‰‹é †

1. **ãƒ•ã‚¡ã‚¤ãƒ«åã®æ±ºå®š**
   - `runâ—.py`ã®å½¢å¼ã§ä½œæˆï¼ˆâ—ã¯æ•°å­—ï¼‰
   - ä¾‹: `run2.py`, `run3.py`, `run4.py`ãªã©

2. **æ–°ã—ã„runãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**
   ```python
   # run2.pyï¼ˆä¾‹ï¼‰
   from pybricks.hubs import PrimeHub
   from pybricks.parameters import Port, Axis, Direction
   from pybricks.pupdevices import Motor
   from pybricks.robotics import DriveBase
   from pybricks.tools import wait, multitask, run_task
   from setup import initialize_robot

   def run2(robot, hub, left, right, lift):
       """run2ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³å®Ÿè¡Œé–¢æ•°
       
       Args:
           robot: DriveBaseã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
           hub: PrimeHubã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ  
           left: å·¦ãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
           right: å³ãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
           lift: ãƒªãƒ•ãƒˆãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
       """
       # ã“ã“ã«ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®å‹•ä½œã‚’è¨˜è¿°
       robot.straight(200)  # 200mmç›´é€²
       robot.turn(90)       # 90åº¦å›è»¢
       wait(500)           # 0.5ç§’å¾…æ©Ÿ
   ```

3. **ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿å­˜**
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜
   - æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¯UTF-8ã§ä¿å­˜

### ãƒ­ãƒ¼ãƒãƒ¼ãƒ»ã‚¢ãƒ¼ãƒ æ“ä½œã®è©³ç´°ä¾‹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€**ãƒ­ãƒ¼ãƒãƒ¼ç”¨2ã¤ã®ãƒ¢ãƒ¼ã‚¿ãƒ¼**ã¨**ã‚¢ãƒ¼ãƒ ç”¨2ã¤ã®ãƒ¢ãƒ¼ã‚¿ãƒ¼**ã®è¨ˆ4ã¤ã®ãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚’åˆ¶å¾¡ã§ãã¾ã™ã€‚ä»¥ä¸‹ã«å…·ä½“çš„ãªæ“ä½œãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¨˜è¼‰ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

#### ğŸš— å˜ç´”ãªæ“ä½œ

##### ãƒ­ãƒ¼ãƒãƒ¼ã‚’å‹•ã‹ã™ï¼ˆrobot, left_wheel, right_wheelä½¿ç”¨ï¼‰

**åŸºæœ¬çš„ãªç§»å‹•:**
```python
def basic_movement_example(hub, robot, left_wheel, right_wheel, left_lift, right_lift):
    """åŸºæœ¬çš„ãªãƒ­ãƒ¼ãƒãƒ¼ç§»å‹•ã®ä¾‹"""
    # å‰é€²
    robot.straight(300)  # 300mmå‰é€²
    wait(200)
    
    # å¾Œé€²
    robot.straight(-200)  # 200mmå¾Œé€²
    wait(200)
    
    # å›è»¢ï¼ˆãã®å ´å›è»¢ï¼‰
    robot.turn(90)   # 90åº¦å³å›è»¢
    wait(200)
    robot.turn(-90)  # 90åº¦å·¦å›è»¢
    wait(200)
```

**å‰é€²ã—ãªãŒã‚‰æ›²ãŒã‚‹ï¼ˆã‚«ãƒ¼ãƒ–ç§»å‹•ï¼‰:**
```python
def curve_movement_example(hub, robot, left_wheel, right_wheel, left_lift, right_lift):
    """ã‚«ãƒ¼ãƒ–ç§»å‹•ã®ä¾‹"""
    # å¤§ããªå¼§ã‚’æã„ã¦ç§»å‹•ï¼ˆradius: åŠå¾„, angle: è§’åº¦ï¼‰
    robot.curve(200, 90)   # åŠå¾„200mmã§90åº¦ã‚«ãƒ¼ãƒ–
    wait(300)
    
    # é€†æ–¹å‘ã®ã‚«ãƒ¼ãƒ–
    robot.curve(150, -45)  # åŠå¾„150mmã§45åº¦å·¦ã‚«ãƒ¼ãƒ–
    wait(300)
```

**ãã®å ´ã§ã®å‘ãå¤‰æ›´ï¼ˆ2ã¤ã®æ–¹æ³•ï¼‰:**
```python
def rotation_methods_example(hub, robot, left_wheel, right_wheel, left_lift, right_lift):
    """å›è»¢æ–¹æ³•ã®æ¯”è¼ƒä¾‹"""
    # æ–¹æ³•1: ä¸¡è¼ªé€†å›è»¢ï¼ˆé«˜é€Ÿãƒ»æ­£ç¢ºï¼‰
    robot.turn(180)  # robotã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨
    wait(500)
    
    # æ–¹æ³•2: ç‰‡è¼ªã®ã¿å›è»¢ï¼ˆã‚†ã£ãã‚Šãƒ»å®‰å®šï¼‰
    left_wheel.run_angle(200, 360)   # å·¦è¼ªã®ã¿360åº¦å›è»¢
    wait(500)
    
    # æ–¹æ³•3: æ‰‹å‹•ã§ä¸¡è¼ªåˆ¶å¾¡ï¼ˆç´°ã‹ã„èª¿æ•´å¯èƒ½ï¼‰
    left_wheel.run_angle(300, 180, wait=False)   # å·¦è¼ªæ­£è»¢ï¼ˆéåŒæœŸï¼‰
    right_wheel.run_angle(300, -180)             # å³è¼ªé€†è»¢ï¼ˆåŒæœŸï¼‰
    wait(200)
```

##### ã‚¢ãƒ¼ãƒ ç”¨ãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚’å‹•ã‹ã™ï¼ˆleft_lift, right_liftä½¿ç”¨ï¼‰

**å˜ç´”ãªã‚¢ãƒ¼ãƒ æ“ä½œ:**
```python
def simple_arm_example(hub, robot, left_wheel, right_wheel, left_lift, right_lift):
    """åŸºæœ¬çš„ãªã‚¢ãƒ¼ãƒ æ“ä½œã®ä¾‹"""
    # ä¸¡ã‚¢ãƒ¼ãƒ ã‚’åŒæ™‚ã«ä¸Šã’ã‚‹
    left_lift.run_angle(500, 180)   # é€Ÿåº¦500ã§180åº¦å›è»¢
    right_lift.run_angle(500, 180)
    wait(300)
    
    # ä¸¡ã‚¢ãƒ¼ãƒ ã‚’åŒæ™‚ã«ä¸‹ã’ã‚‹
    left_lift.run_angle(500, -180)
    right_lift.run_angle(500, -180)
    wait(300)
    
    # ç‰‡æ–¹ã®ã‚¢ãƒ¼ãƒ ã®ã¿æ“ä½œ
    left_lift.run_angle(300, 90)    # å·¦ã‚¢ãƒ¼ãƒ ã®ã¿90åº¦å›è»¢
    wait(200)
    left_lift.run_angle(300, -90)   # å…ƒã®ä½ç½®ã«æˆ»ã™
    wait(200)
```

#### ğŸ”„ è¤‡é›‘ãªæ“ä½œ

##### ãƒ­ãƒ¼ãƒãƒ¼ç§»å‹•å¾Œã«ã‚¢ãƒ¼ãƒ æ“ä½œï¼ˆé †æ¬¡å®Ÿè¡Œï¼‰

```python
def sequential_operation_example(hub, robot, left_wheel, right_wheel, left_lift, right_lift):
    """é †æ¬¡æ“ä½œã®ä¾‹: ç§»å‹•â†’åœæ­¢â†’ã‚¢ãƒ¼ãƒ æ“ä½œ"""
    # ã‚¹ãƒ†ãƒƒãƒ—1: ç›®æ¨™åœ°ç‚¹ã¾ã§ç§»å‹•
    robot.straight(400)     # 400mmå‰é€²
    robot.turn(45)          # 45åº¦å›è»¢
    robot.straight(200)     # ã•ã‚‰ã«200mmå‰é€²
    
    # ã‚¹ãƒ†ãƒƒãƒ—2: å®Œå…¨åœæ­¢ã‚’ç¢ºèª
    robot.stop()
    wait(500)               # æŒ¯å‹•ãŒåã¾ã‚‹ã¾ã§å¾…æ©Ÿ
    
    # ã‚¹ãƒ†ãƒƒãƒ—3: ã‚¢ãƒ¼ãƒ æ“ä½œé–‹å§‹
    print("ã‚¢ãƒ¼ãƒ æ“ä½œé–‹å§‹")
    left_lift.run_angle(400, 270)   # å·¦ã‚¢ãƒ¼ãƒ 270åº¦å›è»¢
    right_lift.run_angle(400, 270)  # å³ã‚¢ãƒ¼ãƒ 270åº¦å›è»¢
    wait(1000)                      # ã‚¢ãƒ¼ãƒ å‹•ä½œå®Œäº†å¾…ã¡
    
    # ã‚¹ãƒ†ãƒƒãƒ—4: ã‚¢ãƒ¼ãƒ ã‚’æˆ»ã—ã¦ç§»å‹•å†é–‹
    left_lift.run_angle(400, -270)
    right_lift.run_angle(400, -270)
    wait(500)
    robot.straight(-200)            # å¾Œé€€
```

##### ãƒ­ãƒ¼ãƒãƒ¼ç§»å‹•ä¸­ã«ã‚¢ãƒ¼ãƒ æ“ä½œï¼ˆä¸¦è¡Œå®Ÿè¡Œï¼‰

```python
def parallel_operation_example(hub, robot, left_wheel, right_wheel, left_lift, right_lift):
    """ä¸¦è¡Œæ“ä½œã®ä¾‹: ç§»å‹•ã—ãªãŒã‚‰ã‚¢ãƒ¼ãƒ æ“ä½œ"""
    # ç§»å‹•é–‹å§‹ã¨åŒæ™‚ã«ã‚¢ãƒ¼ãƒ æ“ä½œé–‹å§‹ï¼ˆéåŒæœŸï¼‰
    left_lift.run_angle(300, 180, wait=False)   # wait=Falseã§éåŒæœŸå®Ÿè¡Œ
    right_lift.run_angle(300, 180, wait=False)
    
    # ã‚¢ãƒ¼ãƒ ãŒå‹•ã„ã¦ã„ã‚‹é–“ã«ãƒ­ãƒ¼ãƒãƒ¼ã‚‚ç§»å‹•
    robot.straight(500)     # ã‚¢ãƒ¼ãƒ å‹•ä½œä¸­ã«ç§»å‹•
    wait(200)               # ã‚¢ãƒ¼ãƒ å‹•ä½œå®Œäº†ã‚’å¾…ã¤
    
    # ç§»å‹•ã—ãªãŒã‚‰ã‚¢ãƒ¼ãƒ ã‚’æˆ»ã™
    left_lift.run_angle(400, -180, wait=False)
    right_lift.run_angle(400, -180, wait=False)
    robot.turn(90)          # ã‚¢ãƒ¼ãƒ ãŒæˆ»ã‚ŠãªãŒã‚‰å›è»¢
    wait(500)
```

##### ç‰‡æ–¹ã®ã‚¢ãƒ¼ãƒ å‹•ä½œä¸­ã«ã‚‚ã†ç‰‡æ–¹ã®ã‚¢ãƒ¼ãƒ æ“ä½œ

```python
def independent_arm_example(hub, robot, left_wheel, right_wheel, left_lift, right_lift):
    """ç‹¬ç«‹ã—ãŸã‚¢ãƒ¼ãƒ æ“ä½œã®ä¾‹"""
    # å·¦ã‚¢ãƒ¼ãƒ ã‚’å‹•ã‹ã—å§‹ã‚ã‚‹ï¼ˆéåŒæœŸï¼‰
    left_lift.run_angle(200, 360, wait=False)
    wait(500)               # å°‘ã—é…ã‚Œã¦...
    
    # å³ã‚¢ãƒ¼ãƒ ã‚‚å‹•ã‹ã—å§‹ã‚ã‚‹ï¼ˆéåŒæœŸï¼‰
    right_lift.run_angle(300, -180, wait=False)
    wait(200)
    
    # ä¸¡æ–¹ã®ã‚¢ãƒ¼ãƒ ãŒå‹•ã„ã¦ã„ã‚‹é–“ã«ãƒ­ãƒ¼ãƒãƒ¼ã‚‚ç§»å‹•
    robot.straight(300)
    
    # å·¦ã‚¢ãƒ¼ãƒ ã®å‹•ä½œãŒçµ‚ã‚ã£ãŸã‚‰åˆ¥ã®å‹•ä½œ
    wait(1000)              # å·¦ã‚¢ãƒ¼ãƒ å®Œäº†ã‚’å¾…ã¤
    left_lift.run_angle(400, -180)  # å·¦ã‚¢ãƒ¼ãƒ ã‚’é€†æ–¹å‘ã«
    
    # å³ã‚¢ãƒ¼ãƒ ã¯ã¾ã å‹•ã„ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§å¾…ã¤
    wait(800)               # å³ã‚¢ãƒ¼ãƒ å®Œäº†ã‚’å¾…ã¤
    right_lift.run_angle(400, 90)   # å³ã‚¢ãƒ¼ãƒ ã®è¿½åŠ å‹•ä½œ
```

#### ğŸ¯ å®Ÿè·µçš„ãªãƒŸãƒƒã‚·ãƒ§ãƒ³ä¾‹

```python
def mission_complete_example(hub, robot, left_wheel, right_wheel, left_lift, right_lift):
    """å®Ÿéš›ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’æƒ³å®šã—ãŸè¤‡åˆæ“ä½œ"""
    print("ãƒŸãƒƒã‚·ãƒ§ãƒ³é–‹å§‹: ãƒ–ãƒ­ãƒƒã‚¯å–å¾—ãƒ»é‹æ¬ãƒ»é…ç½®")
    
    # ãƒ•ã‚§ãƒ¼ã‚º1: ãƒ–ãƒ­ãƒƒã‚¯å–å¾—åœ°ç‚¹ã¾ã§ç§»å‹•
    robot.straight(600)
    robot.turn(45)
    robot.straight(300)
    
    # ãƒ•ã‚§ãƒ¼ã‚º2: ãƒ–ãƒ­ãƒƒã‚¯å–å¾—ï¼ˆã‚¢ãƒ¼ãƒ æ“ä½œï¼‰
    print("ãƒ–ãƒ­ãƒƒã‚¯å–å¾—ä¸­...")
    left_lift.run_angle(300, 90, wait=False)   # ä¸¡ã‚¢ãƒ¼ãƒ å±•é–‹
    right_lift.run_angle(300, 90, wait=False)
    robot.straight(100)                        # ãƒ–ãƒ­ãƒƒã‚¯ã«æ¥è¿‘
    wait(500)
    left_lift.run_angle(300, -120)             # ãƒ–ãƒ­ãƒƒã‚¯ã‚’æ´ã‚€
    right_lift.run_angle(300, -120)
    wait(300)
    
    # ãƒ•ã‚§ãƒ¼ã‚º3: é‹æ¬ï¼ˆç§»å‹•ä¸­ã«ã‚¢ãƒ¼ãƒ ä¿æŒï¼‰
    print("é‹æ¬ä¸­...")
    robot.straight(-100)                       # ãƒ–ãƒ­ãƒƒã‚¯ã‹ã‚‰é›¢ã‚Œã‚‹
    robot.turn(-90)                           # é…ç½®åœ°ç‚¹ã¸å‘ã
    
    # é‹æ¬ä¸­ã«ã‚¢ãƒ¼ãƒ ã®ä½ç½®èª¿æ•´
    left_lift.run_angle(200, 30, wait=False)  # é‹æ¬ã—ã‚„ã™ã„ä½ç½®ã«
    right_lift.run_angle(200, 30, wait=False)
    robot.straight(800)                        # é…ç½®åœ°ç‚¹ã¾ã§ç§»å‹•
    
    # ãƒ•ã‚§ãƒ¼ã‚º4: ãƒ–ãƒ­ãƒƒã‚¯é…ç½®
    print("ãƒ–ãƒ­ãƒƒã‚¯é…ç½®ä¸­...")
    robot.straight(50)                         # é…ç½®ä½ç½®ã«ç²¾å¯†æ¥è¿‘
    left_lift.run_angle(400, 120)             # ãƒ–ãƒ­ãƒƒã‚¯ã‚’é…ç½®
    right_lift.run_angle(400, 120)
    wait(500)
    robot.straight(-150)                       # é…ç½®åœ°ç‚¹ã‹ã‚‰é›¢è„±
    
    # ãƒ•ã‚§ãƒ¼ã‚º5: åˆæœŸä½ç½®ã«æˆ»ã‚‹
    left_lift.run_angle(500, -90)             # ã‚¢ãƒ¼ãƒ ã‚’åˆæœŸä½ç½®ã«
    right_lift.run_angle(500, -90)
    robot.turn(180)                           # å‘ãã‚’æˆ»ã™
    robot.straight(600)                        # åˆæœŸä½ç½®ã¾ã§ç§»å‹•
    
    print("ãƒŸãƒƒã‚·ãƒ§ãƒ³å®Œäº†!")
```

#### ğŸ’¡ ãƒ¢ãƒ¼ã‚¿ãƒ¼åˆ¶å¾¡ã®ã‚³ãƒ„

**é€Ÿåº¦è¨­å®šã®ç›®å®‰:**
- ç²¾å¯†ä½œæ¥­: 100-300
- é€šå¸¸å‹•ä½œ: 300-500  
- é«˜é€Ÿç§»å‹•: 500-800

**wait()ã®ä½¿ã„æ–¹:**
- æ©Ÿæ¢°çš„ãªå‹•ä½œå¾Œ: `wait(200-500)`
- æŒ¯å‹•åæŸå¾…ã¡: `wait(300-800)`
- å®‰å…¨ç¢ºèª: `wait(100-200)`

**éåŒæœŸå®Ÿè¡Œ(`wait=False`)ã®æ´»ç”¨:**
- è¤‡æ•°ãƒ¢ãƒ¼ã‚¿ãƒ¼ã®åŒæ™‚å‹•ä½œ
- ç§»å‹•ã¨ã‚¢ãƒ¼ãƒ æ“ä½œã®ä¸¦è¡Œå®Ÿè¡Œ
- åŠ¹ç‡çš„ãªæ™‚é–“çŸ­ç¸®

### selector.pyã§ã®ç™»éŒ²æ‰‹é †

1. **æ–°ã—ã„runãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ**
   ```python
   # selecter.pyã®ä¸Šéƒ¨ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡ã‚’è¿½åŠ 
   import run
   import run1
   import run2  # æ–°ã—ãè¿½åŠ 
   ```

2. **programsãƒªã‚¹ãƒˆã¸ã®è¿½åŠ **
   ```python
   # selecter.pyã®programsãƒªã‚¹ãƒˆã«æ–°ã—ã„ã‚¨ãƒ³ãƒˆãƒªã‚’è¿½åŠ 
   programs = [
       {"name": "straight_with_power", "module": run, "description": "straight_with_poweré–¢æ•°", "function": "straight_with_power", "params": [robot,100, 50]},
       {"name": "straight_with_power", "module": run, "description": "straight_with_poweré–¢æ•°", "function": "straight_with_power", "params": [robot,100, 10]},
       {"name": "å›è»¢", "module": run, "description": "å›è»¢", "function": "turn_with_power", "params": [robot,hub,100, 10]},
       {"name": "run1", "module": run1, "description": "run1é–¢æ•°", "function": "run1", "params": [robot,hub,left,right,lift]},
       {"name": "run2", "module": run2, "description": "run2é–¢æ•°", "function": "run2", "params": [robot,hub,left,right,lift]},  # æ–°ã—ãè¿½åŠ 
       # ä»–ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ã“ã“ã«è¿½åŠ 
   ]
   ```

3. **ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚¨ãƒ³ãƒˆãƒªã®æ§‹æˆè¦ç´ **

   å„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚¨ãƒ³ãƒˆãƒªã¯è¾æ›¸å½¢å¼ã§ä»¥ä¸‹ã®è¦ç´ ã‚’å«ã¿ã¾ã™ï¼š

   **å¿…é ˆè¦ç´ :**
   - `name`: ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼è¡¨ç¤ºåï¼ˆçŸ­ãã‚ã‹ã‚Šã‚„ã™ãï¼‰
   - `module`: ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å
   - `description`: è©³ç´°èª¬æ˜ï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«è¡¨ç¤ºç”¨ï¼‰
   - `function`: å®Ÿè¡Œã™ã‚‹é–¢æ•°åï¼ˆæ–‡å­—åˆ—ï¼‰

   **ä»»æ„è¦ç´ :**
   - `params`: é–¢æ•°ã«æ¸¡ã™ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒªã‚¹ãƒˆï¼ˆçœç•¥æ™‚ã¯å¼•æ•°ãªã—ã§å®Ÿè¡Œï¼‰

   **å…·ä½“ä¾‹:**

   ```python
   # ä¾‹1: åŸºæœ¬çš„ãªruné–¢æ•°ã®ç™»éŒ²
   {
       "name": "run2",                    # ãƒãƒ–ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã«è¡¨ç¤ºã•ã‚Œã‚‹åå‰
       "module": run2,                    # ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸrun2ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
       "description": "ãƒŸãƒƒã‚·ãƒ§ãƒ³2å®Ÿè¡Œ",   # ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è¡¨ç¤ºã•ã‚Œã‚‹è©³ç´°èª¬æ˜
       "function": "run2",                # run2ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å†…ã®run2é–¢æ•°ã‚’å®Ÿè¡Œ
       "params": [hub, robot, left_wheel, right_wheel, left_lift, right_lift]  # é–¢æ•°ã«æ¸¡ã™å¼•æ•°
   }

   # ä¾‹2: runãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®é–¢æ•°ã‚’ä½¿ç”¨
   {
       "name": "ç›´é€²ãƒ†ã‚¹ãƒˆ",
       "module": run,
       "description": "100mmç›´é€²ï¼ˆ50%ãƒ‘ãƒ¯ãƒ¼ï¼‰",
       "function": "straight_with_power",
       "params": [robot, 100, 50]         # robot, è·é›¢, ãƒ‘ãƒ¯ãƒ¼ã®é †
   }

   # ä¾‹3: å›è»¢å‹•ä½œ
   {
       "name": "å³90åº¦",
       "module": run,
       "description": "90åº¦å³å›è»¢ï¼ˆ30%ãƒ‘ãƒ¯ãƒ¼ï¼‰",
       "function": "turn_with_power",
       "params": [robot, hub, 90, 30]     # robot, hub, è§’åº¦, ãƒ‘ãƒ¯ãƒ¼ã®é †
   }

   # ä¾‹4: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã—ã®é–¢æ•°ï¼ˆå¼•æ•°ãŒä¸è¦ãªå ´åˆï¼‰
   {
       "name": "åˆæœŸåŒ–",
       "module": setup_module,
       "description": "ãƒ­ãƒœãƒƒãƒˆåˆæœŸåŒ–ã®ã¿",
       "function": "reset_all"
       # paramsã‚’çœç•¥ = å¼•æ•°ãªã—ã§å®Ÿè¡Œ
   }
   ```

   **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®šã®ã‚³ãƒ„:**
   - `params`ã®é †åºã¯é–¢æ•°å®šç¾©ã®å¼•æ•°é †åºã¨å®Œå…¨ã«ä¸€è‡´ã•ã›ã‚‹
   - ãƒ­ãƒœãƒƒãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆhub, robotç­‰ï¼‰ã¯æœ€åˆã«é…ç½®ã™ã‚‹ã“ã¨ãŒå¤šã„
   - æ•°å€¤ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆè·é›¢ã€è§’åº¦ã€ãƒ‘ãƒ¯ãƒ¼ç­‰ï¼‰ã¯å¾Œã«é…ç½®
   - çœç•¥ã—ãŸå ´åˆã¯å¼•æ•°ãªã—ã§é–¢æ•°ãŒå‘¼ã°ã‚Œã‚‹

   **ã‚ˆãã‚ã‚‹é–“é•ã„ã¨å¯¾ç­–:**
   ```python
   # âŒ é–“é•ã„: å¼•æ•°ã®é †åºãŒé–¢æ•°å®šç¾©ã¨ç•°ãªã‚‹
   {"function": "straight_with_power", "params": [100, robot, 50]}  # robot ãŒ2ç•ªç›®ã«ãªã£ã¦ã„ã‚‹

   # âœ… æ­£ã—ã„: é–¢æ•°å®šç¾© def straight_with_power(robot, distance_mm, motor_power) ã«åˆã‚ã›ã‚‹
   {"function": "straight_with_power", "params": [robot, 100, 50]}

   # âŒ é–“é•ã„: å¿…è¦ãªå¼•æ•°ãŒä¸è¶³
   {"function": "run2", "params": [robot, hub]}  # left_wheel, right_wheel, left_lift, right_lift ãŒä¸è¶³

   # âœ… æ­£ã—ã„: é–¢æ•°ãŒè¦æ±‚ã™ã‚‹ã™ã¹ã¦ã®å¼•æ•°ã‚’æä¾›
   {"function": "run2", "params": [hub, robot, left_wheel, right_wheel, left_lift, right_lift]}
   ```

4. **å‹•ä½œç¢ºèª**
   - selecter.pyã‚’å®Ÿè¡Œã—ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒªã‚¹ãƒˆã«è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - ãƒãƒ–ã®ãƒœã‚¿ãƒ³ã§é¸æŠã—ã€ãƒ•ã‚©ãƒ¼ã‚¹ã‚»ãƒ³ã‚µãƒ¼ã§å®Ÿè¡Œãƒ†ã‚¹ãƒˆ

5. **ãƒãƒ–ã¸ã®æ›¸ãè¾¼ã¿**
   - Pybricks Appã‹ã‚‰selecter.pyã‚’ãƒ¡ã‚¤ãƒ³ã¨ã—ã¦ãƒãƒ–ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å®Ÿè¡ŒãŒå¯èƒ½ã«ãªã‚‹

### æ³¨æ„ç‚¹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

#### runãƒ•ã‚¡ã‚¤ãƒ«ã®é–¢æ•°å¼•æ•°ã«ã¤ã„ã¦

**é‡è¦**: runãƒ•ã‚¡ã‚¤ãƒ«ã®é–¢æ•°ã¯ã€selecter.pyã§åˆæœŸåŒ–ã•ã‚ŒãŸãƒ­ãƒœãƒƒãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å—ã‘å–ã‚‹å½¢å¼ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

**é–¢æ•°ã‚·ã‚°ãƒãƒãƒ£ã®æ¨™æº–å½¢å¼**:
```python
def runâ—(hub, robot, left_wheel, right_wheel, left_lift, right_lift):
    """
    Args:
        hub: PrimeHubã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆã‚¸ãƒ£ã‚¤ãƒ­ã‚»ãƒ³ã‚µãƒ¼ã€ãƒœã‚¿ãƒ³ã€ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ç­‰ï¼‰
        robot: DriveBaseã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆç›´é€²ãƒ»å›è»¢åˆ¶å¾¡ï¼‰
        left_wheel: å·¦è»Šè¼ªãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
        right_wheel: å³è»Šè¼ªãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ  
        left_lift: å·¦ãƒªãƒ•ãƒˆãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
        right_lift: å³ãƒªãƒ•ãƒˆãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    """
    # ãƒŸãƒƒã‚·ãƒ§ãƒ³å‹•ä½œã‚’ã“ã“ã«è¨˜è¿°
```

**å…·ä½“ä¾‹ 1: åŸºæœ¬çš„ãªç§»å‹•ã¨ãƒªãƒ•ãƒˆæ“ä½œ**
```python
def run2(hub, robot, left_wheel, right_wheel, left_lift, right_lift):
    """ãƒŸãƒƒã‚·ãƒ§ãƒ³2: å‰é€²ã—ã¦ãƒ–ãƒ­ãƒƒã‚¯ã‚’æŒã¡ä¸Šã’ã‚‹"""
    # 200mmå‰é€²
    robot.straight(200)
    
    # ãƒªãƒ•ãƒˆã‚’ä¸Šã’ã‚‹ï¼ˆ360åº¦å›è»¢ï¼‰
    left_lift.run_angle(360, 360)
    right_lift.run_angle(360, 360)
    
    # å°‘ã—å¾…æ©Ÿ
    wait(500)
    
    # 100mmå¾Œé€€
    robot.straight(-100)
    
    # ã‚¸ãƒ£ã‚¤ãƒ­ã‚»ãƒ³ã‚µãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆ
    hub.imu.reset_heading(0)
```

**å…·ä½“ä¾‹ 2: è¤‡é›‘ãªãƒ«ãƒ¼ãƒˆç§»å‹•**
```python
def run3(hub, robot, left_wheel, right_wheel, left_lift, right_lift):
    """ãƒŸãƒƒã‚·ãƒ§ãƒ³3: Lå­—ãƒ«ãƒ¼ãƒˆç§»å‹•"""
    # æœ€åˆã®ç›´é€²
    robot.straight(300)
    
    # 90åº¦å³å›è»¢
    robot.turn(90)
    
    # ãƒªãƒ•ãƒˆã§ä½•ã‹ã‚’æ´ã‚€å‹•ä½œ
    left_lift.run_angle(500, 180)   # ã‚†ã£ãã‚Š180åº¦
    right_lift.run_angle(500, 180)
    
    # 2ç•ªç›®ã®ç›´é€²
    robot.straight(200)
    
    # ãƒªãƒ•ãƒˆã‚’æˆ»ã™
    left_lift.run_angle(500, -180)
    right_lift.run_angle(500, -180)
    
    # æœ€çµ‚ä½ç½®èª¿æ•´
    robot.turn(-45)
    robot.straight(100)
```

**selecter.pyã§ã®å¯¾å¿œã™ã‚‹ç™»éŒ²ä¾‹**:
```python
programs = [
    # æ—¢å­˜ã®ã‚¨ãƒ³ãƒˆãƒª...
    {"name": "run2", "module": run2, "description": "ãƒŸãƒƒã‚·ãƒ§ãƒ³2: ãƒ–ãƒ­ãƒƒã‚¯æŒã¡ä¸Šã’", "function": "run2", "params": [hub, robot, left_wheel, right_wheel, left_lift, right_lift]},
    {"name": "run3", "module": run3, "description": "ãƒŸãƒƒã‚·ãƒ§ãƒ³3: Lå­—ãƒ«ãƒ¼ãƒˆ", "function": "run3", "params": [hub, robot, left_wheel, right_wheel, left_lift, right_lift]},
]
```

#### ãã®ä»–ã®æ³¨æ„ç‚¹
- ã‚¤ãƒ³ãƒãƒ¼ãƒˆé †åºã¯selecter.pyã§å‚ç…§ã™ã‚‹é †ç•ªã«åˆã‚ã›ã‚‹
- ãƒ—ãƒ­ã‚°ãƒ©ãƒ åã¯é‡è¤‡ã—ãªã„ã‚ˆã†æ³¨æ„ã™ã‚‹
- é–¢æ•°å†…ã§`wait()`ã‚’é©å®œä½¿ç”¨ã—ã¦ãƒ­ãƒœãƒƒãƒˆã®å®‰å®šå‹•ä½œã‚’ç¢ºä¿ã™ã‚‹
- ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã‚„ã™ã„å‹•ä½œã®å‰å¾Œã«ã¯`robot.stop()`ã‚’å…¥ã‚Œã‚‹ã“ã¨ã‚’æ¨å¥¨



### âš¡ ç«¶æŠ€æ™‚ã®æ“ä½œæ–¹æ³•

1) ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢æ¥ç¶š
- Port F: å·¦ãƒ¢ãƒ¼ã‚¿ãƒ¼ï¼ˆåæ™‚è¨ˆå›ã‚Šï¼‰
- Port B: å³ãƒ¢ãƒ¼ã‚¿ãƒ¼ï¼ˆæ™‚è¨ˆå›ã‚Šï¼‰
- Port C: ãƒ•ã‚©ãƒ¼ã‚¹ã‚»ãƒ³ã‚µãƒ¼ï¼ˆé¸æŠ/å®Ÿè¡Œç”¨ï¼‰


2) æ“ä½œ

#### ã‚¹ã‚¿ãƒ¼ãƒˆæ™‚

hubã®ãƒ¡ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’é•·æŠ¼ã—ã—ã¦èµ·å‹•ã—ã€å®Ÿè¡Œã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ç•ªå·ã‚’é¸æŠã—ã¦ã€ãƒ•ã‚©ãƒ¼ã‚¹ã‚»ãƒ³ã‚µãƒ¼ã‚’æŠ¼ã—ã¦å®Ÿè¡Œ

- LEFT: å‰ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ 
- RIGHT: æ¬¡ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ 
- ãƒ•ã‚©ãƒ¼ã‚¹ã‚»ãƒ³ã‚µãƒ¼ï¼ˆCï¼‰: é¸æŠã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œ

4) æœ€çŸ­ã§ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’1ä»¶ç™»éŒ²ï¼ˆ`selecter.py` ã® `programs` ã«è¿½è¨˜ï¼‰

```python
{"name": "M01 ç›´é€²100mm(50%)", "module": run, "description": "M01 ç›´é€²ãƒ†ã‚¹ãƒˆ", "function": "straight_with_power", "params": [robot, 100, 50]}
```

5) æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’å®šç¾©ã—ã¦ç™»éŒ²
- ä¾‹: `missions_gemini_2_5_pro.py`ã‚’ä½œæˆ

```python
# missions_gemini_2_5_pro.py
from pybricks.tools import wait

def m01_bridge(robot, hub):
    #ã“ã“ã«å‡¦ç†ã‚’æ›¸ã
    robot.settings()
    robot.straight(200)
    wait(200)
```

- `selecter.py` ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ç™»éŒ²

```python
import missions_gemini_2_5_pro

programs += [
    {"name": "M01 ãƒ–ãƒªãƒƒã‚¸", "module": missions_gemini_2_5_pro, "description": "M01: æ©‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ", "function": "m01_bridge", "params": [robot, hub]},
]
```


ãƒ’ãƒ³ãƒˆ
- å¿…é ˆã‚­ãƒ¼: `name`, `module`, `description`, `function`
- å¤šãã®é–¢æ•°ã¯ `robot`/`hub` ã‚’ä½¿ã†ãŸã‚ `params` ã§æ¸¡ã™
- æ‹¬å¼§å…¥ã‚Šãƒ•ã‚¡ã‚¤ãƒ«åã¯é€šå¸¸ã® `import` ãŒã§ããªã„ãŸã‚ã€å¿…è¦ãªã‚‰æœ¬æ–‡ã® `importlib` ä¾‹ã‚’åˆ©ç”¨

7) æ›¸ãè¾¼ã¿å¾Œã¯æœ¬ä½“ã®ã¿ã§å‹•ä½œã—ã¾ã™ï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³å®Ÿè¡Œï¼‰
- Pybricks App ã‹ã‚‰ `selecter.py` ã‚’ãƒ¡ã‚¤ãƒ³ã¨ã—ã¦ãƒãƒ–ã«ã€Œãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆä¿å­˜ï¼‰ã€ã—ã¦ãã ã•ã„
- ä»¥å¾Œã¯ PC æ¥ç¶šãªã—ã§ã€ãƒãƒ–ã®é›»æºã‚’å…¥ã‚Œã¦ä¸­å¤®ãƒœã‚¿ãƒ³ã‹ã‚‰ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’èµ·å‹•ã§ãã¾ã™
- æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã¯ã€ãƒãƒ–ã®å·¦å³ãƒœã‚¿ãƒ³ï¼ãƒ•ã‚©ãƒ¼ã‚¹ã‚»ãƒ³ã‚µãƒ¼ã§é¸æŠãƒ»å®Ÿè¡Œã§ãã¾ã™

## ğŸš€ æ©Ÿèƒ½

### ä¸»è¦æ©Ÿèƒ½
- **ãƒ­ãƒœãƒƒãƒˆåˆæœŸåŒ–**: ãƒãƒ–ã€ãƒ¢ãƒ¼ã‚¿ãƒ¼ã€ã‚»ãƒ³ã‚µãƒ¼ã®è‡ªå‹•è¨­å®š
- **PIDåˆ¶å¾¡**: é«˜ç²¾åº¦ãªç›´é€²ãƒ»å›è»¢åˆ¶å¾¡
- **ãƒ—ãƒ­ã‚°ãƒ©ãƒ é¸æŠ**: ãƒœã‚¿ãƒ³æ“ä½œã«ã‚ˆã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ åˆ‡ã‚Šæ›¿ãˆ
- **ã‚»ãƒ³ã‚µãƒ¼ãƒ­ã‚°**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã®ã‚»ãƒ³ã‚µãƒ¼å€¤è¡¨ç¤º
- **éåŒæœŸå‡¦ç†**: è¤‡æ•°ã‚¿ã‚¹ã‚¯ã®ä¸¦è¡Œå®Ÿè¡Œ


## ğŸ”§ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å¿…è¦ãªç’°å¢ƒ
- LEGO SPIKE Prime ãƒãƒ–
- Pybricks Firmwareï¼ˆæœ€æ–°ç‰ˆæ¨å¥¨ï¼‰
- 2ã¤ã®ãƒ¢ãƒ¼ã‚¿ãƒ¼ï¼ˆPort F, Port Bï¼‰
- ãƒ•ã‚©ãƒ¼ã‚¹ã‚»ãƒ³ã‚µãƒ¼ï¼ˆPort Cã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- Python 3.7ä»¥ä¸Š
- Cursorï¼ˆæ¨å¥¨ï¼‰

### é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆCursorï¼‰

#### 1. Pythonä»®æƒ³ç’°å¢ƒã®ä½œæˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š

**macOS/Linux:**
```bash
python3 -m venv .venv
source .venv/bin/activate
```

**Windows PowerShell:**
```powershell
py -3 -m venv .venv
.venv\Scripts\activate
```

**Cursorã‚’ä½¿ã†å ´åˆ:**
1. `F1`ã‚­ãƒ¼ï¼ˆmacOSã§ã¯`âŒ˜+â‡§+P`ï¼‰ã§ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆã‚’é–‹ã
2. `Python: Create Environment`ã‚’æ¤œç´¢ã—ã¦é¸æŠ
3. `Venv`ã‚’é¸æŠ
4. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã§`*Global*`ã‚’é¸æŠ
5. ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§`Python: Create Terminal`ã‚’å®Ÿè¡Œã—ã€ä»®æƒ³ç’°å¢ƒã‚’æœ‰åŠ¹åŒ–

#### 2. å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ä»®æƒ³ç’°å¢ƒãŒæœ‰åŠ¹åŒ–ã•ã‚ŒãŸçŠ¶æ…‹ã§ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«`(.venv)`ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼‰ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œï¼š

```bash
pip install pybricks
pip install pybricksdev
```

#### 3. launch.jsonã®è¨­å®š

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®`.vscode`ãƒ•ã‚©ãƒ«ãƒ€ã«`launch.json`ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ãƒ­ãƒœãƒƒãƒˆåã‚’å¤‰æ›´ã—ã¦ãã ã•ã„ï¼š

```json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python Debugger: Module",
            "type": "debugpy",
            "request": "launch",
            "module": "pybricksdev",
            "args": ["run", "ble", "${file}","--name","Pybricks Hub"],
        }
    ]
}
```

**ãƒ­ãƒœãƒƒãƒˆåã‚’æŒ‡å®šã™ã‚‹å ´åˆ:**
```json
"args": ["run", "ble", "${file}", "--name", "my robot"]
```

`"my robot"`ã®éƒ¨åˆ†ã‚’å®Ÿéš›ã®ãƒ­ãƒœãƒƒãƒˆåã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚

#### 4. å‚è€ƒè³‡æ–™

ã‚ˆã‚Šè©³ã—ã„æƒ…å ±ã¯ã€Pybrickså…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š
- [Using Pybricks with Cursor and other editors](https://pybricks.com/project/pybricks-other-editors/)

### ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢è¨­å®š
```
Port F: å·¦ãƒ¢ãƒ¼ã‚¿ãƒ¼ï¼ˆåæ™‚è¨ˆå›ã‚Šï¼‰
Port B: å³ãƒ¢ãƒ¼ã‚¿ãƒ¼ï¼ˆæ™‚è¨ˆå›ã‚Šï¼‰
Port C: ãƒ•ã‚©ãƒ¼ã‚¹ã‚»ãƒ³ã‚µãƒ¼ï¼ˆãƒ—ãƒ­ã‚°ãƒ©ãƒ é¸æŠç”¨ï¼‰
```

### ãƒ­ãƒœãƒƒãƒˆä»•æ§˜
- ãƒ›ã‚¤ãƒ¼ãƒ«ç›´å¾„: 56mm
- è»Šè»¸é–“è·é›¢: 115mm
- æœ€å¤§é€Ÿåº¦: 500mm/sï¼ˆç›´é€²ï¼‰ã€500deg/sï¼ˆå›è»¢ï¼‰

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### 1. Cursorã§ã®å®Ÿè¡Œæ–¹æ³•

#### 1.1 ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Ÿè¡Œæ‰‹é †

1. **ãƒ­ãƒœãƒƒãƒˆã®æº–å‚™**
   - LEGO SPIKE Primeãƒãƒ–ã®é›»æºã‚’å…¥ã‚Œã‚‹
   - BluetoothãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

2. **Cursorã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã**
   - å®Ÿè¡Œã—ãŸã„Pythonãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä¾‹: `run1.py`ã€`selecter.py`ãªã©ï¼‰ã‚’é–‹ã

3. **ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Ÿè¡Œ**
   - `F5`ã‚­ãƒ¼ã‚’æŠ¼ã™ï¼ˆmacOSã§ã‚‚`F5`ï¼‰
   - ã¾ãŸã¯ã€ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã®ç·‘è‰²ã®å†ç”Ÿãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

4. **å®Ÿè¡Œçµæœã®ç¢ºèª**
   - ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«æ¥ç¶šçŠ¶æ³ã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å‡ºåŠ›ãŒè¡¨ç¤ºã•ã‚Œã¾ã™
   - ãƒ­ãƒœãƒƒãƒˆãŒå‹•ä½œã‚’é–‹å§‹ã—ã¾ã™

#### 1.2 å®Ÿè¡Œæ™‚ã®æ³¨æ„ç‚¹

**è¤‡æ•°ã®ãƒãƒ–ãŒã‚ã‚‹å ´åˆ:**
- `.vscode/launch.json`ã§ãƒ­ãƒœãƒƒãƒˆåã‚’æŒ‡å®šã—ã¦ãã ã•ã„
- æŒ‡å®šã—ãªã„å ´åˆã¯ã€æœ€åˆã«è¦‹ã¤ã‹ã£ãŸãƒãƒ–ã«æ¥ç¶šã•ã‚Œã¾ã™

**ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®åœæ­¢æ–¹æ³•:**
- Cursorã®åœæ­¢ãƒœã‚¿ãƒ³ã§ã¯åœæ­¢ã§ãã¾ã›ã‚“
- ãƒãƒ–ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’åœæ­¢ã—ã¦ãã ã•ã„

**æ¥ç¶šãŒåˆ‡ã‚Œã‚‹å ´åˆ:**
- ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒå®Œäº†ã™ã‚‹ã¨è‡ªå‹•çš„ã«åˆ‡æ–­ã•ã‚Œã¾ã™
- ãƒãƒ–ã¯æ•°åˆ†é–“ã‚¢ã‚¤ãƒ‰ãƒ«çŠ¶æ…‹ãŒç¶šãã¨è‡ªå‹•çš„ã«é›»æºãŒåˆ‡ã‚Œã¾ã™
- å†åº¦ãƒãƒ–ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦èµ·å‹•ã—ã¦ãã ã•ã„


```

### 2. åŸºæœ¬å®Ÿè¡Œï¼ˆãƒ—ãƒ­ã‚°ãƒ©ãƒ å†…ã§ã®åˆæœŸåŒ–ï¼‰

#### 2.1 ãƒ­ãƒœãƒƒãƒˆã®åˆæœŸåŒ–
```python
from setup import initialize_robot

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§åˆæœŸåŒ–
hub, left, right, robot = initialize_robot()

# ã‚«ã‚¹ã‚¿ãƒ è¨­å®šã§åˆæœŸåŒ–
hub, left, right, robot = initialize_robot(
    straight_speed_percent=50,    # ç›´é€²é€Ÿåº¦50%
    turn_speed_percent=40,        # æ—‹å›é€Ÿåº¦40%
    motor_power_percent=80        # ãƒ¢ãƒ¼ã‚¿ãƒ¼ãƒ‘ãƒ¯ãƒ¼80%
)
```



### 3. ãƒ—ãƒ­ã‚°ãƒ©ãƒ é¸æŠãƒ¢ãƒ¼ãƒ‰

#### 3.1 ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã®èµ·å‹•
```bash
# selecter.pyã‚’å®Ÿè¡Œ
python selecter.py
```

#### 3.2 æ“ä½œæ–¹æ³•
| æ“ä½œ | æ©Ÿèƒ½ |
|------|------|
| **LEFTãƒœã‚¿ãƒ³** | å‰ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«åˆ‡ã‚Šæ›¿ãˆ |
| **RIGHTãƒœã‚¿ãƒ³** | æ¬¡ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«åˆ‡ã‚Šæ›¿ãˆ |
| **ãƒ•ã‚©ãƒ¼ã‚¹ã‚»ãƒ³ã‚µãƒ¼** | é¸æŠã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œ |
| **ãƒãƒ–ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤** | ç¾åœ¨ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ç•ªå·ã‚’è¡¨ç¤º |

#### 3.3 ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒªã‚¹ãƒˆã®ç¢ºèª
```python
# selecter.pyå†…ã®programsãƒªã‚¹ãƒˆ
programs = [
    {"name": "ç›´é€²ãƒ†ã‚¹ãƒˆ", "module": run, "function": "straight_with_power", "params": [robot, 100, 50]},
    {"name": "ä½é€Ÿç›´é€²", "module": run, "function": "straight_with_power", "params": [robot, 100, 10]},
    {"name": "å›è»¢ãƒ†ã‚¹ãƒˆ", "module": run, "function": "turn_with_power", "params": [robot, hub, 100, 10]},
    # æ–°ã—ã„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ã“ã“ã«è¿½åŠ 
]
```

#### 3.4 æ–°ã—ã„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®è¿½åŠ 
```python
# selecter.pyã®programsãƒªã‚¹ãƒˆã«è¿½åŠ 
{"name": "ã‚«ã‚¹ã‚¿ãƒ å‹•ä½œ", "module": run, "function": "custom_function", "params": [robot, hub, parameter]}
```

#### 3.5 æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã«ç™»éŒ²ã™ã‚‹

æ–°ã—ã„å‹•ä½œã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ‡ã‚Šå‡ºã—ã¦ç®¡ç†ã—ãŸã„å ´åˆã®æ‰‹é †ã§ã™ã€‚

- **ãƒ•ã‚¡ã‚¤ãƒ«åã®ãƒ«ãƒ¼ãƒ«ï¼ˆé‡è¦ï¼‰**: Pythonã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ãã‚‹ã‚ˆã†ã«ã€è‹±æ•°å­—ã¨ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã®ã¿ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
  - ä¾‹: `my_actions_gemini_2_5_pro.py`ï¼ˆæ‹¬å¼§ã‚„ãƒã‚¤ãƒ•ãƒ³ã¯ä½¿ã‚ãªã„ï¼‰

1) æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼ˆä¾‹: `my_actions_gemini_2_5_pro.py`ï¼‰

```python
"""Generated with Gemini-2.5-pro"""

from pybricks.tools import wait

def straight_slow(robot, distance_mm: int, motor_power: int):
    robot.settings(straight_speed=abs(motor_power) * 5)
    robot.straight(distance_mm)
    wait(100)

def turn_and_go(robot, hub, angle_deg: int, distance_mm: int, motor_power: int):
    robot.settings(turn_rate=abs(motor_power) * 5)
    robot.turn(angle_deg)
    hub.imu.reset_heading(0)
    robot.settings(straight_speed=abs(motor_power) * 5)
    robot.straight(distance_mm)
```

2) `selecter.py` ã«æ–°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

```python
# ãƒ•ã‚¡ã‚¤ãƒ«å…ˆé ­ä»˜è¿‘ã«è¿½è¨˜
import my_actions_gemini_2_5_pro as my_actions
```

è£œè¶³: ãƒ•ã‚¡ã‚¤ãƒ«åã«ãƒ¢ãƒ‡ãƒ«åã‚’æ‹¬å¼§ä»˜ãã§å«ã‚ãŸã„å ´åˆ

- ä¾‹: `my_actionsï¼ˆGemini-2.5-proï¼‰.py` ã®ã‚ˆã†ã«æ‹¬å¼§ã‚„ãƒã‚¤ãƒ•ãƒ³ã‚’å«ã‚€ã¨ã€`import my_actionsï¼ˆ...ï¼‰` ã®ã‚ˆã†ãªé€šå¸¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¯ã§ãã¾ã›ã‚“ã€‚
- ã“ã®å ´åˆã¯ `importlib` ã‚’ä½¿ã£ã¦ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‹ã‚‰èª­ã¿è¾¼ã¿ã¾ã™ï¼ˆä¸‹è¨˜ä¾‹ã§ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã‚’ `my_actions` ã«å‰²ã‚Šå½“ã¦ï¼‰ã€‚

```python
import importlib.util, sys

module_path = "my_actionsï¼ˆGemini-2.5-proï¼‰.py"
spec = importlib.util.spec_from_file_location("my_actions", module_path)
my_actions = importlib.util.module_from_spec(spec)
sys.modules["my_actions"] = my_actions
spec.loader.exec_module(my_actions)
```

3) `selecter.py` ã® `programs` ãƒªã‚¹ãƒˆã«ç™»éŒ²

```python
programs = [
    # æ—¢å­˜ã‚¨ãƒ³ãƒˆãƒª...
    {"name": "ä½é€Ÿç›´é€²(æ–°ãƒ•ã‚¡ã‚¤ãƒ«)", "module": my_actions, "description": "æ–°ãƒ•ã‚¡ã‚¤ãƒ«: ä½é€Ÿç›´é€²", "function": "straight_slow", "params": [robot, 120, 20]},
    {"name": "å›è»¢â†’å‰é€²(æ–°ãƒ•ã‚¡ã‚¤ãƒ«)", "module": my_actions, "description": "æ–°ãƒ•ã‚¡ã‚¤ãƒ«: å›è»¢å¾Œã«å‰é€²", "function": "turn_and_go", "params": [robot, hub, 90, 150, 40]},
]
```

4) å®Ÿè¡Œã—ã¦ç¢ºèª

```bash
python selecter.py
```

5) ã†ã¾ãã„ã‹ãªã„å ´åˆ
- **ModuleNotFoundError**: ãƒ•ã‚¡ã‚¤ãƒ«åã¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆåãŒä¸€è‡´ã—ã¦ã„ã‚‹ã‹ï¼ˆæ‹¡å¼µå­ `.py` ã‚’é™¤ã„ãŸåå‰ï¼‰ã‚’ç¢ºèª
- **TypeError**: `params` ã®é †ç•ªãƒ»å€‹æ•°ãŒé–¢æ•°å®šç¾©ã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã‹ç¢ºèª
- **NameError**: `module` ã«æŒ‡å®šã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆåï¼ˆä¾‹: `my_actions`ï¼‰ã‚’æ­£ã—ãã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‹ç¢ºèª

#### 3.6 ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒªã‚¹ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

`selecter.py` ã® `programs` ã¯ã€ä»¥ä¸‹ã®è¾æ›¸è¦ç´ ã®ãƒªã‚¹ãƒˆã§ã™ã€‚

```python
# programs ãƒªã‚¹ãƒˆã®å„è¦ç´ ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆå¿…é ˆ/ä»»æ„ï¼‰
{
    "name": "è¡¨ç¤ºå",                 # å¿…é ˆ: strï¼ˆãƒãƒ–è¡¨ç¤ºãƒ»ãƒ­ã‚°ç”¨ï¼‰
    "module": run,                   # å¿…é ˆ: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆä¾‹: run, my_actionsï¼‰
    "description": "èª¬æ˜æ–‡",         # å¿…é ˆ: strï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«è¡¨ç¤ºï¼‰
    "function": "é–¢æ•°å",             # å¿…é ˆ: strï¼ˆmodule å†…ã«å­˜åœ¨ã™ã‚‹é–¢æ•°åï¼‰
    "params": [robot, hub, 100, 50], # ä»»æ„: listï¼ˆé–¢æ•°ã«æ¸¡ã™å¼•æ•°ã€‚é †åºã¯é–¢æ•°å®šç¾©ã«åˆã‚ã›ã‚‹ï¼‰
}
```

- **å¿…é ˆã‚­ãƒ¼**: `name`, `module`, `description`, `function`
  - `description` ã¯ `selecter.py` ã®å‡ºåŠ›ã§å¿…ãšå‚ç…§ã•ã‚Œã‚‹ãŸã‚çœç•¥ä¸å¯
- **ä»»æ„ã‚­ãƒ¼**: `params`
  - çœç•¥ã—ãŸå ´åˆã¯ã€å¼•æ•°ãªã—ã§é–¢æ•°ãŒå‘¼ã°ã‚Œã¾ã™
  - å¤šãã®é–¢æ•°ã¯ `robot` ã‚„ `hub` ã‚’å¿…è¦ã¨ã™ã‚‹ãŸã‚ã€é€šå¸¸ã¯æŒ‡å®šã—ã¾ã™

ä¾‹1: å¼•æ•°ã‚ã‚Š

```python
{"name": "ç›´é€²(100mm,50%)", "module": run, "description": "ç›´é€²ãƒ†ã‚¹ãƒˆ", "function": "straight_with_power", "params": [robot, 100, 50]}
```

ä¾‹2: å¼•æ•°ãªã—ï¼ˆé–¢æ•°å´ãŒå¼•æ•°ä¸è¦ãªå ´åˆï¼‰

```python
{"name": "åˆæœŸåŒ–ã®ã¿", "module": run, "description": "å¼•æ•°ãªã—é–¢æ•°ã®ä¾‹", "function": "init_only"}
```
#### 3.7 ç™»éŒ²ã•ã‚Œã‚‹å´ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æ›¸ãæ–¹

ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã«ç™»éŒ²ã™ã‚‹é–¢æ•°ã¯ã€Œé€šå¸¸ã®åŒæœŸé–¢æ•°ã€ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®æŒ‡é‡ã«å¾“ã£ã¦ä½œæˆã—ã¦ãã ã•ã„ã€‚

- **åŒæœŸé–¢æ•°ã§æ›¸ã**: `def ...`ï¼ˆ`async def`ã¯ä¸å¯ï¼‰
- **åˆæœŸåŒ–ã¯ã—ãªã„**: `initialize_robot()` ã‚’å‘¼ã°ãšã€`robot` ã‚„ `hub` ã¯å¼•æ•°ã§å—ã‘å–ã‚‹
- **æˆ»ã‚Šå€¤ã¯ä¸è¦**: `None` ã§OK
- **ä¾‹å¤–å‡¦ç†**: ä¸Šä½ã§æ•æ‰ã•ã‚Œã‚‹ãŸã‚ã€ãã®ã¾ã¾ä¾‹å¤–ã‚’æŠ•ã’ã¦ã‚‚OKï¼ˆå®‰å…¨åœæ­¢ãŒå¿…è¦ãªã‚‰é–¢æ•°å†…ã§ `robot.stop()` ãªã©ã‚’å®Ÿæ–½ï¼‰

æ¨å¥¨ã‚·ã‚°ãƒãƒãƒ£ï¼ˆä¾‹ï¼‰

```python
# my_actions_gemini_2_5_pro.py
from pybricks.tools import wait

def go_and_turn(robot, hub, distance_mm: int, angle_deg: int, power: int) -> None:
    """æŒ‡å®šè·é›¢ç›´é€²â†’æŒ‡å®šè§’åº¦å›è»¢"""
    robot.settings(straight_speed=abs(power) * 5)
    robot.straight(distance_mm)
    wait(100)
    robot.settings(turn_rate=abs(power) * 5)
    robot.turn(angle_deg)
    hub.imu.reset_heading(0)
```

ãƒ¢ãƒ¼ã‚¿ãƒ¼ç­‰ã®è¿½åŠ ãƒ‡ãƒã‚¤ã‚¹ãŒå¿…è¦ãªå ´åˆã¯ã€å¼•æ•°ã¨ã—ã¦å—ã‘å–ã£ã¦ãã ã•ã„ã€‚

```python
from pybricks.pupdevices import Motor

def lift_and_move(robot, lift_motor: Motor, up_deg: int, distance_mm: int, power: int) -> None:
    lift_motor.run_target(speed=200, target_angle=up_deg)
    robot.settings(straight_speed=abs(power) * 5)
    robot.straight(distance_mm)
```

ç™»éŒ²ä¾‹ï¼ˆ`selecter.py` ã® `programs`ï¼‰

```python
{"name": "é€²ã‚€â†’å›ã‚‹", "module": my_actions, "description": "ç›´é€²å¾Œã«å›è»¢", "function": "go_and_turn", "params": [robot, hub, 150, 90, 40]}
{"name": "æŒã¡ä¸Šã’â†’å‰é€²", "module": my_actions, "description": "ãƒªãƒ•ãƒˆå¾Œã«å‰é€²", "function": "lift_and_move", "params": [robot, lift, 90, 200, 30]}
```

æ³¨æ„ç‚¹
- `wait()` ã‚’é©å®œå…¥ã‚Œã¦æ©Ÿä½“ä¿è­·ã¨å®‰å®šå‹•ä½œã‚’ç¢ºä¿
- `selecter.py` å´ã§å®Ÿè¡Œå‰å¾Œã« `reset_robot()` ãŒå‘¼ã°ã‚Œã‚‹å‰æã®ãŸã‚ã€é–¢æ•°å†…ã§å†åˆæœŸåŒ–ã—ãªã„
- é•·æ™‚é–“ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ãªã©ã¯é¿ã‘ã€1å›ã®å‘¼ã³å‡ºã—ã§å®Œäº†ã™ã‚‹å‡¦ç†ã«ã¾ã¨ã‚ã‚‹


### 4. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

#### 4.1 ç›´é€²ãƒ»å›è»¢ãƒ†ã‚¹ãƒˆ
```bash
# straight_test.pyã‚’å®Ÿè¡Œ
python straight_test.py
```

**ãƒ†ã‚¹ãƒˆå†…å®¹:**
- 100mmç›´é€²ï¼ˆå‡ºåŠ›100%ï¼‰
- 100mmç›´é€²ï¼ˆå‡ºåŠ›10%ï¼‰
- 100åº¦å›è»¢ï¼ˆå‡ºåŠ›100%ï¼‰
- 360åº¦å›è»¢ï¼ˆå‡ºåŠ›10%ï¼‰


#### 4.2 ç²¾åº¦ãƒ†ã‚¹ãƒˆï¼ˆstraight_with_power / turn_with_powerï¼‰

ç›´é€²è·é›¢ã¨å›è»¢è§’åº¦ã®ç²¾åº¦ã‚’æ¸¬å®šã™ã‚‹ãŸã‚ã®ç°¡æ˜“ãƒ†ã‚¹ãƒˆã§ã™ã€‚ä¸‹è¨˜ã‚’æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã—ã¦å®Ÿè¡Œã§ãã¾ã™ã€‚

- æ¨å¥¨ãƒ•ã‚¡ã‚¤ãƒ«å: `accuracy_test_gemini_2_5_pro.py`

```python
from pybricks.tools import wait
from setup import initialize_robot
from run import straight_with_power, turn_with_power


def straight_accuracy_test(robot, target_mm: int = 100, power: int = 50, trials: int = 5) -> None:
    """ç›´é€²ç²¾åº¦ã‚’ trials å›æ¸¬å®šã—ã¦èª¤å·®ã‚’è¡¨ç¤º"""
    errors = []
    for i in range(trials):
        robot.reset()
        straight_with_power(robot, target_mm, power)
        actual = robot.distance()
        error = actual - target_mm
        errors.append(error)
        print(f"[Straight #{i+1}] target={target_mm}mm actual={actual:.1f}mm error={error:+.1f}mm")
        wait(200)

    avg_error = sum(errors) / len(errors)
    avg_abs_error = sum(abs(e) for e in errors) / len(errors)
    print(f"AVG error={avg_error:+.1f}mm, AVG |error|={avg_abs_error:.1f}mm")


def turn_accuracy_test(robot, hub, target_deg: int = 90, power: int = 30, trials: int = 5) -> None:
    """å›è»¢ç²¾åº¦ã‚’ trials å›æ¸¬å®šã—ã¦èª¤å·®ã‚’è¡¨ç¤º"""
    errors = []
    for i in range(trials):
        hub.imu.reset_heading(0)
        turn_with_power(robot, hub, target_deg, power)
        actual = hub.imu.heading()
        error = actual - target_deg
        errors.append(error)
        print(f"[Turn #{i+1}] target={target_deg}Â° actual={actual:.1f}Â° error={error:+.1f}Â°")
        wait(200)

    avg_error = sum(errors) / len(errors)
    avg_abs_error = sum(abs(e) for e in errors) / len(errors)
    print(f"AVG error={avg_error:+.1f}Â°, AVG |error|={avg_abs_error:.1f}Â°")


if __name__ == "__main__":
    hub, left, right, robot = initialize_robot()

    # ç›´é€²ã®ç²¾åº¦ãƒ†ã‚¹ãƒˆï¼ˆä¾‹: 100mm ã‚’å‡ºåŠ›50%ã§5å›ï¼‰
    straight_accuracy_test(robot, target_mm=100, power=50, trials=5)

    # å›è»¢ã®ç²¾åº¦ãƒ†ã‚¹ãƒˆï¼ˆä¾‹: 90Â° ã‚’å‡ºåŠ›30%ã§5å›ï¼‰
    turn_accuracy_test(robot, hub, target_deg=90, power=30, trials=5)
```

èª¿æ•´ã®ãƒ’ãƒ³ãƒˆ
- **ã‚¿ã‚¤ãƒ¤/è»Šè»¸ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**: `setup.py` ã® `setup_robot_parameters()` ã§ `wheel_diameter`ï¼ˆã‚¿ã‚¤ãƒ¤å¾„ï¼‰ã¨ `axle_track`ï¼ˆè»Šè»¸é–“è·é›¢ï¼‰ã‚’å®Ÿæ¸¬ã«åˆã‚ã›ã¦èª¿æ•´ã™ã‚‹ã¨ç›´é€²/æ—‹å›ç²¾åº¦ãŒå‘ä¸Šã—ã¾ã™ã€‚
- **PID ã‚²ã‚¤ãƒ³**: `setup.py` ã® `setup_pid_control()` å†…ã® `DISTANCE_*` ã¨ `HEADING_*` ã‚’æ®µéšçš„ã«èª¿æ•´ã€‚
- **å®Ÿè¡Œæ¡ä»¶**: å¹³å¦ãªè·¯é¢ãƒ»å®‰å®šã—ãŸãƒãƒƒãƒ†ãƒªãƒ¼ãƒ»ã‚±ãƒ¼ãƒ–ãƒ«å¹²æ¸‰ç„¡ã—ã§æ¸¬å®šã€‚
- **ãƒ‘ãƒ¯ãƒ¼è¨­å®š**: é«˜ã™ãã‚‹å‡ºåŠ›ã¯ã‚ªãƒ¼ãƒãƒ¼ã‚·ãƒ¥ãƒ¼ãƒˆã‚’æ‹›ãå ´åˆã‚ã‚Šã€‚ã¾ãšã¯ 20â€“50% ã‹ã‚‰ã€‚



### 5. éåŒæœŸå‡¦ç†ã®æ´»ç”¨

#### 5.1 è¤‡æ•°ã‚¿ã‚¹ã‚¯ã®ä¸¦è¡Œå®Ÿè¡Œ
```python
from pybricks.tools import multitask, run_task

async def main_sequence():
    # ãƒ¡ã‚¤ãƒ³ã®å‹•ä½œã‚·ãƒ¼ã‚±ãƒ³ã‚¹
    await straight_with_power(robot, 200, 60)
    await turn_with_power(robot, hub, 90, 40)

# ã‚»ãƒ³ã‚µãƒ¼ãƒ­ã‚°ã¨ãƒ¡ã‚¤ãƒ³ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’ä¸¦è¡Œå®Ÿè¡Œ
run_task(multitask(
    sensor_logger_task(),    # ã‚»ãƒ³ã‚µãƒ¼ãƒ­ã‚°
    main_sequence()          # ãƒ¡ã‚¤ãƒ³å‹•ä½œ
))
```

#### 5.2 ã‚«ã‚¹ã‚¿ãƒ éåŒæœŸé–¢æ•°ã®ä½œæˆ
```python
async def custom_sequence():
    """ã‚«ã‚¹ã‚¿ãƒ å‹•ä½œã‚·ãƒ¼ã‚±ãƒ³ã‚¹"""
    print("ã‚«ã‚¹ã‚¿ãƒ ã‚·ãƒ¼ã‚±ãƒ³ã‚¹é–‹å§‹")
    
    # è¤‡æ•°ã®å‹•ä½œã‚’é †æ¬¡å®Ÿè¡Œ
    await straight_with_power(robot, 150, 70)
    await wait(1000)  # 1ç§’å¾…æ©Ÿ
    
    await turn_with_power(robot, hub, 180, 50)
    await wait(500)   # 0.5ç§’å¾…æ©Ÿ
    
    await straight_with_power(robot, 150, 70)
    
    print("ã‚«ã‚¹ã‚¿ãƒ ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å®Œäº†")

# å®Ÿè¡Œ
run_task(multitask(
    sensor_logger_task(),
    custom_sequence()
))
```

### 6. ãƒ‡ãƒãƒƒã‚°ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### 6.1 ãƒ­ãƒœãƒƒãƒˆã®çŠ¶æ…‹ç¢ºèª
```python
def check_robot_status():
    """ãƒ­ãƒœãƒƒãƒˆã®çŠ¶æ…‹ã‚’ç¢ºèª"""
    print(f"å·¦ãƒ¢ãƒ¼ã‚¿ãƒ¼è§’åº¦: {left.angle()}Â°")
    print(f"å³ãƒ¢ãƒ¼ã‚¿ãƒ¼è§’åº¦: {right.angle()}Â°")
    print(f"èµ°è¡Œè·é›¢: {robot.distance()} mm")
    print(f"ç¾åœ¨ã®å‘ã: {hub.imu.heading()}Â°")
    print(f"ãƒãƒƒãƒ†ãƒªãƒ¼æ®‹é‡: {hub.battery.voltage()} mV")

# çŠ¶æ…‹ç¢ºèª
check_robot_status()
```

#### 6.2 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```python
def safe_robot_operation():
    """å®‰å…¨ãªãƒ­ãƒœãƒƒãƒˆæ“ä½œ"""
    try:
        # ãƒ­ãƒœãƒƒãƒˆã®åˆæœŸåŒ–
        hub, left, right, robot = initialize_robot()
        
        # å‹•ä½œå®Ÿè¡Œ
        straight_with_power(robot, 100, 50)
        turn_with_power(robot, hub, 90, 30)
        
    except Exception as e:
        print(f"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")
        # ãƒ­ãƒœãƒƒãƒˆã‚’åœæ­¢
        robot.stop()
        robot.reset()
        hub.imu.reset_heading(0)
        print("ãƒ­ãƒœãƒƒãƒˆã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ")
```



## âš™ï¸ è¨­å®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

### é€Ÿåº¦è¨­å®šï¼ˆsetup.pyï¼‰
```python
straight_speed_percent = 40    # ç›´é€²é€Ÿåº¦ï¼ˆæœ€å¤§å€¤ã®40%ï¼‰
turn_speed_percent = 30        # æ—‹å›é€Ÿåº¦ï¼ˆæœ€å¤§å€¤ã®30%ï¼‰
motor_power_percent = 100      # ãƒ¢ãƒ¼ã‚¿ãƒ¼ãƒ‘ãƒ¯ãƒ¼ï¼ˆ100%ï¼‰
```

### PIDåˆ¶å¾¡ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
```python
# è·é›¢åˆ¶å¾¡
DISTANCE_KP = 1000
DISTANCE_KI = 50
DISTANCE_KD = 10

# æ–¹å‘åˆ¶å¾¡
HEADING_KP = 2000
HEADING_KI = 50
HEADING_KD = 100
```

## ğŸ” ã‚»ãƒ³ã‚µãƒ¼æƒ…å ±

### ãƒ­ã‚°å‡ºåŠ›ä¾‹
```
LOG: dist= 150 mm  heading=  45Â°  L=  180Â°  R=  180Â°
```

**è¡¨ç¤ºé …ç›®:**
- `dist`: èµ°è¡Œè·é›¢ï¼ˆmmï¼‰
- `heading`: ç¾åœ¨ã®å‘ãï¼ˆåº¦ï¼‰
- `L`: å·¦ãƒ¢ãƒ¼ã‚¿ãƒ¼è§’åº¦ï¼ˆåº¦ï¼‰
- `R`: å³ãƒ¢ãƒ¼ã‚¿ãƒ¼è§’åº¦ï¼ˆåº¦ï¼‰

### ãƒ­ã‚°æ©Ÿèƒ½ã®ã‚ªãƒ³ãƒ»ã‚ªãƒ•åˆ‡ã‚Šæ›¿ãˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯é–‹ç™ºç”¨ã¨ç«¶æŠ€ç”¨ã§ãƒ­ã‚°æ©Ÿèƒ½ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ä»•çµ„ã¿ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚

#### ãƒ•ã‚¡ã‚¤ãƒ«åˆ¥ã®ãƒ­ã‚°æ©Ÿèƒ½

| ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ­ã‚°æ©Ÿèƒ½ | ç”¨é€” |
|---------|---------|------|
| `selecter.py` | **ãªã—** | ç«¶æŠ€æœ¬ç•ªç”¨ï¼ˆé«˜é€Ÿå®Ÿè¡Œï¼‰ |
| `selecter_dev.py` | **åˆ‡ã‚Šæ›¿ãˆå¯èƒ½** | é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ç”¨ |
| `straight_test.py` | **å¸¸æ™‚æœ‰åŠ¹** | ãƒ†ã‚¹ãƒˆãƒ»èª¿æ•´ç”¨ |

#### selecter_dev.pyã§ã®ãƒ­ã‚°åˆ‡ã‚Šæ›¿ãˆ

**ãƒ­ã‚°æœ‰åŠ¹ã«ã™ã‚‹å ´åˆ:**
```python
# selecter_dev.py ã®11è¡Œç›®ã‚’ç·¨é›†
dev = True  # ãƒ­ã‚°ã‚’è¡¨ç¤º

# å®Ÿè¡Œæ™‚ã®å‹•ä½œ
run_task(multitask(
    sensor_logger_task(),  # ã‚»ãƒ³ã‚µãƒ¼ãƒ­ã‚°ã‚¿ã‚¹ã‚¯ã‚’ä¸¦è¡Œå®Ÿè¡Œ
    selecter_task()        # ãƒ—ãƒ­ã‚°ãƒ©ãƒ é¸æŠã‚¿ã‚¹ã‚¯
))
```

**ãƒ­ã‚°ç„¡åŠ¹ã«ã™ã‚‹å ´åˆ:**
```python
# selecter_dev.py ã®11è¡Œç›®ã‚’ç·¨é›†
dev = False  # ãƒ­ã‚°ã‚’éè¡¨ç¤º

# å®Ÿè¡Œæ™‚ã®å‹•ä½œ
run_task(multitask(
    selecter_task()        # ãƒ—ãƒ­ã‚°ãƒ©ãƒ é¸æŠã‚¿ã‚¹ã‚¯ã®ã¿å®Ÿè¡Œ
))
```

#### ãƒ­ã‚°è¡¨ç¤ºã®è©³ç´°

**æ›´æ–°é–“éš”:** 200msï¼ˆ0.2ç§’ï¼‰ã”ã¨  
**è¡¨ç¤ºãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ:**
```
--- ã‚»ãƒ³ã‚µãƒ¼ãƒ­ã‚°ã‚¿ã‚¹ã‚¯é–‹å§‹ ---
LOG: dist= 150 mm  heading=  45Â°  L=  180Â°  R=  180Â°
LOG: dist= 165 mm  heading=  47Â°  L=  195Â°  R=  195Â°
LOG: dist= 180 mm  heading=  48Â°  L=  210Â°  R=  210Â°
```

#### ä½¿ç”¨å ´é¢åˆ¥ã®æ¨å¥¨è¨­å®š

**ğŸ”§ é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°æ™‚:**
- `selecter_dev.py`ã‚’ä½¿ç”¨
- `dev = True`ã«è¨­å®š
- ã‚»ãƒ³ã‚µãƒ¼å€¤ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç¢ºèªã—ãªãŒã‚‰èª¿æ•´

**ğŸ ç«¶æŠ€æœ¬ç•ªæ™‚:**
- `selecter.py`ã‚’ä½¿ç”¨
- ãƒ­ã‚°ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãªã—ã§æœ€é«˜æ€§èƒ½ã‚’ç™ºæ®

**ğŸ§ª ç²¾åº¦ãƒ†ã‚¹ãƒˆæ™‚:**
- `straight_test.py`ã‚’ä½¿ç”¨
- å¸¸æ™‚ãƒ­ã‚°æœ‰åŠ¹ã§è©³ç´°ãªå‹•ä½œç¢ºèª

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿

| è¨­å®š | CPUä½¿ç”¨ç‡ | ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | å¿œç­”æ€§ |
|------|-----------|-------------|---------|
| ãƒ­ã‚°æœ‰åŠ¹ | é«˜ | ä¸­ | ã‚„ã‚„ä½ä¸‹ |
| ãƒ­ã‚°ç„¡åŠ¹ | ä½ | ä½ | æœ€é«˜ |

**æ³¨æ„ç‚¹:**
- ãƒ­ã‚°ãŒæœ‰åŠ¹ãªå ´åˆã€200msã”ã¨ã®printå‡¦ç†ã«ã‚ˆã‚Šè‹¥å¹²ã®æ€§èƒ½ä½ä¸‹ãŒã‚ã‚Šã¾ã™
- ç«¶æŠ€æ™‚ã¯ãƒ­ã‚°ã‚’ç„¡åŠ¹ã«ã™ã‚‹ã“ã¨ã§æœ€é«˜ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç¢ºä¿ã§ãã¾ã™
- é–‹ç™ºæ™‚ã¯ãƒ­ã‚°ã‚’æœ‰åŠ¹ã«ã—ã¦ãƒ­ãƒœãƒƒãƒˆã®çŠ¶æ…‹ã‚’æŠŠæ¡ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™

## ğŸ› ï¸ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### æ–°ã—ã„å‹•ä½œé–¢æ•°ã®è¿½åŠ 
```python
# run.pyã«æ–°ã—ã„é–¢æ•°ã‚’è¿½åŠ 
def custom_action(robot, parameter):
    # ã‚«ã‚¹ã‚¿ãƒ å‹•ä½œã®å®Ÿè£…
    pass
```

### ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒªã‚¹ãƒˆã¸ã®è¿½åŠ 
```python
# selecter.pyã®programsãƒªã‚¹ãƒˆã«è¿½åŠ 
{"name": "ã‚«ã‚¹ã‚¿ãƒ å‹•ä½œ", "module": run, "function": "custom_action", "params": [robot, parameter]}
```

## âš ï¸ æ³¨æ„äº‹é …

1. **åˆæœŸåŒ–**: ãƒ—ãƒ­ã‚°ãƒ©ãƒ å®Ÿè¡Œå‰ã«å¿…ãšãƒ­ãƒœãƒƒãƒˆã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„
2. **ãƒªã‚»ãƒƒãƒˆ**: ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã¯ãƒ­ãƒœãƒƒãƒˆã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦ãã ã•ã„
3. **ã‚»ãƒ³ã‚µãƒ¼**: ã‚¸ãƒ£ã‚¤ãƒ­ã‚»ãƒ³ã‚µãƒ¼ã®åˆæœŸåŒ–ã‚’å¿˜ã‚Œãšã«è¡Œã£ã¦ãã ã•ã„
4. **éåŒæœŸå‡¦ç†**: `run_task()`ã‚’ä½¿ç”¨ã—ã¦éåŒæœŸã‚¿ã‚¹ã‚¯ã‚’é©åˆ‡ã«ç®¡ç†ã—ã¦ãã ã•ã„

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ
- **ç›´é€²ç²¾åº¦ãŒæ‚ªã„**: PIDãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®èª¿æ•´ãŒå¿…è¦
- **ãƒ¢ãƒ¼ã‚¿ãƒ¼ãŒé€†å›è»¢**: `positive_direction`ã®è¨­å®šã‚’ç¢ºèª
- **ã‚»ãƒ³ã‚µãƒ¼å€¤ãŒç•°å¸¸**: ã‚¸ãƒ£ã‚¤ãƒ­ã‚»ãƒ³ã‚µãƒ¼ã®ãƒªã‚»ãƒƒãƒˆã‚’å®Ÿè¡Œ

### ãƒ‡ãƒãƒƒã‚°æ–¹æ³•
1. ã‚»ãƒ³ã‚µãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª
2. å„ã‚¹ãƒ†ãƒƒãƒ—ã§`print()`æ–‡ã‚’è¿½åŠ 
3. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª

